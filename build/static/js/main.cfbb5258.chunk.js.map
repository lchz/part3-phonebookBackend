{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/peopleService.js","components/Notification.js","App.js","index.js"],"names":["Filter","search","handleFilter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","results","persons","deletingHandler","length","map","p","key","name","number","onClick","id","r","baseUrl","axios","get","then","response","data","newPerson","post","delete","person","put","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","setNewName","setNewNumber","setSearch","setResults","notification","setNotification","useEffect","peopleService","objects","event","target","filter","toLowerCase","includes","preventDefault","find","pe","window","confirm","changedPerson","returnedPerson","error","concat","catch","setTimeout","deleting","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cfbb5258.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({search, handleFilter}) => {\n    return (\n        <input value={search} onChange={handleFilter} />\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\n    return (\n        <form onSubmit={addPerson}>\n            <div>\n                name: <input value={newName} onChange={handleNameChange} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ results, persons, search, deletingHandler }) => {\n\n    const rows = () => persons.map(p => <p key={p.name}>{p.name} {p.number} <button onClick={() => deletingHandler(p.id)}>delete</button> </p>)\n    const filterRows = () => results.map(r => <p key={r.name}>{r.name} {r.number} <button onClick={() => deletingHandler(r.id)}>delete</button> </p>)\n\n\n    if (results.length === 0 && search.length === 0) {\n        return (<div>{rows()} </div>)\n    } else if (results.length === 0 && search.length !== 0) {\n        return (<div>No such person</div>)\n    }\n    return (<div>{filterRows()} </div>)\n}\n\nexport default Persons","import axios from 'axios'\n\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(r => r.data)\n}\n\nconst replaceNumber = (id, person) => {\n    const request = axios.put(`${baseUrl}/${id}`, person)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, replaceNumber }","import React from 'react'\n\nconst Notification = ({message}) => {\n    if (message === null || message === '') {\n      return null\n    }\n\n    /** Validation msg */\n    if (message.search('Added') === -1 && message.search('Deleted') === -1 && message.search('Replaced') === -1) {\n      const errorStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px'\n      }\n\n      return (\n        <div style={errorStyle}>\n          {message}\n        </div>\n      )\n    } \n\n    const successStyle = {\n      color: 'green',\n      background: 'lightgrey',\n      fontSize: '20px',\n      borderStyle: 'solid',\n      borderRadius: '5px',\n      padding: '10px',\n      marginBottom: '10px'\n    }\n\n    return (\n      <div style={successStyle}>\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport peopleService from './services/peopleService'\nimport Notification from './components/Notification'\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [results, setResults] = useState([])\n  const [notification, setNotification] = useState('')\n\n  // Fetch data from json-server\n  useEffect(() => {\n    peopleService.getAll()\n      .then(objects => setPersons(objects))\n  }, [])\n\n  // onChange event handler\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  /** Create new person, onSubmit event handler*/ \n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const p = persons.find(pe => pe.name === newName)\n\n    if (p != null) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const changedPerson = { ...p, number: newNumber }\n        peopleService.replaceNumber(p.id, changedPerson)\n                      .then(returnedPerson => setPersons(\n                        persons.map(person => person.id !== p.id ? person : returnedPerson)\n                      ))\n                      .then(error => {\n                        if (error) {\n                          setNotification(`Information of ${p.name} has already been removed from server`)\n                          setPersons(persons.filter(person => person.id !== p.id))\n                        } else {\n                          setNotification(`Replaced ${p.name}'s number`)\n                        }\n                      })\n                      // .then(setNotification(`Replaced ${p.name}'s number`))\n                      // .catch(error => {\n                      //   setNotification(`Information of ${p.name} has already been removed from server`)\n                      //   setPersons(persons.filter(person => person.id !== p.id))\n                      // })\n      }\n      \n    } else {\n      const person = {\n        name: newName,\n        number: newNumber\n      }\n\n      peopleService.create(person)\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n          setNotification(`Added ${newName}`)\n        }) \n        .catch(error => {\n          setNotification(error.response.data.error)\n          // console.log(error.response.data.error)\n        })\n      \n    }\n\n    setTimeout(() => {setNotification(null)}, 5000)\n    setNewName('')\n    setNewNumber('')\n  }\n\n  // filter onChange event handler\n  const handleFilter = (event) => {\n    setSearch(event.target.value)\n    setResults(persons.filter(p => p.name.toLowerCase().includes(event.target.value.toLowerCase())))\n  }\n\n  // DELETE button handler\n  const deletingHandler = (id) => {\n    const deleting = persons.find(p => p.id === id)\n    \n    if (window.confirm(`Delete ${deleting.name}?`)) {\n      peopleService.deletePerson(id)\n                    .then(setPersons(persons.filter(p => p.id !== id)))\n\n      setNotification(`Deleted ${deleting.name}`)\n      setTimeout(() => {setNotification(null)}, 5000);\n    }\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={notification} />\n\n      filter shown with: <Filter search={search} handleFilter={handleFilter} />\n\n      <h3>Add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n\n      <h3>Numbers</h3>\n      <Persons results={results} persons={persons} search={search} deletingHandler={deletingHandler} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}